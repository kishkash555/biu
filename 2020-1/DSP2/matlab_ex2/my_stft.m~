function S = my_stft(s, w_analysis, R ,NFFT)
Ls = length(s);
Lh = length(w_analysis);
n_slices = floor((Ls-Lh+1)/R);

n_folds = ceil(Lh/NFFT); % should always be an integer anyway
% slice_pad = NFFT*n_folds-Lh;

all_windows = zeros(n_slices,NFFT);

for m = 0:n_slices-1
    slice = s(m*R+1: m*R+Lh);
    windowed_slice = slice .* w_analysis;
    folded_y = reshape(windowed_slice,NFFT,[]);
    all_windows(m+1,:) = sum();
end

S = fft(all_windows,NFFT,2)';

    
    